
import 'package:dotted_line/dotted_line.dart';
import 'package:flutter/material.dart';
import 'package:expandable/expandable.dart';

class UserOrderHistory extends StatefulWidget {
  const UserOrderHistory({super.key});

  @override
  State<UserOrderHistory> createState() => _UserOrderHistoryState();
}

class _UserOrderHistoryState extends State<UserOrderHistory> {
  List UserAllOrderHistory = [

    {
      "orderNumber":"Order#45654",
      "orderType":"Complete",
      "LastOrderHistoryTime":"21-01-2023 12:13AM",
      "SubtotalPrice":"10",
      "DeliveryFee":"10",
      "OrderTotalPrice":"10",


      "AllProduct":[
        {
          "ProductName":"Burger Tasty Food",
          "ProductImageURL":"https://img.freepik.com/premium-photo/hamburger-with-flying-ingredients-white-background_787273-480.jpg?w=2000",
          "OrderRating":"5",
          "OrderAmount":"/1kg / 120 Kcal",
          "OrderSelection":"1",
          "OrderPrice":"15",
        },


           {
          "ProductName":"Burger Tasty Food",
          "ProductImageURL":"https://img.freepik.com/premium-photo/hamburger-with-flying-ingredients-white-background_787273-480.jpg?w=2000",
          "OrderRating":"5",
          "OrderAmount":"/1kg / 120 Kcal",
          "OrderSelection":"1",
          "OrderPrice":"15",
        },


           {
          "ProductName":"Burger Tasty Food",
          "ProductImageURL":"https://img.freepik.com/premium-photo/hamburger-with-flying-ingredients-white-background_787273-480.jpg?w=2000",
          "OrderRating":"5",
          "OrderAmount":"/1kg / 120 Kcal",
          "OrderSelection":"1",
          "OrderPrice":"15",
        },

           {
          "ProductName":"Burger Tasty Food",
          "ProductImageURL":"https://img.freepik.com/premium-photo/hamburger-with-flying-ingredients-white-background_787273-480.jpg?w=2000",
          "OrderRating":"5",
          "OrderAmount":"/1kg / 120 Kcal",
          "OrderSelection":"1",
          "OrderPrice":"15",
        },



      ]

    },




     {
      "orderNumber":"Order#45654",
      "orderType":"Complete",
      "LastOrderHistoryTime":"21-01-2023 12:13AM",
      "SubtotalPrice":"10",
      "DeliveryFee":"10",
      "OrderTotalPrice":"10",


      "AllProduct":[
        {
          "ProductName":"Burger Tasty Food",
          "ProductImageURL":"https://img.freepik.com/premium-photo/hamburger-with-flying-ingredients-white-background_787273-480.jpg?w=2000",
          "OrderRating":"5",
          "OrderAmount":"/1kg / 120 Kcal",
          "OrderSelection":"1",
          "OrderPrice":"15",
        },


           {
          "ProductName":"Burger Tasty Food",
          "ProductImageURL":"https://img.freepik.com/premium-photo/hamburger-with-flying-ingredients-white-background_787273-480.jpg?w=2000",
          "OrderRating":"5",
          "OrderAmount":"/1kg / 120 Kcal",
          "OrderSelection":"1",
          "OrderPrice":"15",
        },


           {
          "ProductName":"Burger Tasty Food",
          "ProductImageURL":"https://img.freepik.com/premium-photo/hamburger-with-flying-ingredients-white-background_787273-480.jpg?w=2000",
          "OrderRating":"5",
          "OrderAmount":"/1kg / 120 Kcal",
          "OrderSelection":"1",
          "OrderPrice":"15",
        },

           {
          "ProductName":"Burger Tasty Food",
          "ProductImageURL":"https://img.freepik.com/premium-photo/hamburger-with-flying-ingredients-white-background_787273-480.jpg?w=2000",
          "OrderRating":"5",
          "OrderAmount":"/1kg / 120 Kcal",
          "OrderSelection":"1",
          "OrderPrice":"15",
        },



      ]

    },



     {
      "orderNumber":"Order#45654",
      "orderType":"Complete",
      "LastOrderHistoryTime":"21-01-2023 12:13AM",
      "SubtotalPrice":"10",
      "DeliveryFee":"10",
      "OrderTotalPrice":"10",


      "AllProduct":[
        {
          "ProductName":"Burger Tasty Food",
          "ProductImageURL":"https://img.freepik.com/premium-photo/hamburger-with-flying-ingredients-white-background_787273-480.jpg?w=2000",
          "OrderRating":"5",
          "OrderAmount":"/1kg / 120 Kcal",
          "OrderSelection":"1",
          "OrderPrice":"15",
        },


           {
          "ProductName":"Burger Tasty Food",
          "ProductImageURL":"https://img.freepik.com/premium-photo/hamburger-with-flying-ingredients-white-background_787273-480.jpg?w=2000",
          "OrderRating":"5",
          "OrderAmount":"/1kg / 120 Kcal",
          "OrderSelection":"1",
          "OrderPrice":"15",
        },


           {
          "ProductName":"Burger Tasty Food",
          "ProductImageURL":"https://img.freepik.com/premium-photo/hamburger-with-flying-ingredients-white-background_787273-480.jpg?w=2000",
          "OrderRating":"5",
          "OrderAmount":"/1kg / 120 Kcal",
          "OrderSelection":"1",
          "OrderPrice":"15",
        },

           {
          "ProductName":"Burger Tasty Food",
          "ProductImageURL":"https://img.freepik.com/premium-photo/hamburger-with-flying-ingredients-white-background_787273-480.jpg?w=2000",
          "OrderRating":"5",
          "OrderAmount":"/1kg / 120 Kcal",
          "OrderSelection":"1",
          "OrderPrice":"15",
        },



      ]

    }
    ,



     {
      "orderNumber":"Order#45654",
      "orderType":"Complete",
      "LastOrderHistoryTime":"21-01-2023 12:13AM",
      "SubtotalPrice":"10",
      "DeliveryFee":"10",
      "OrderTotalPrice":"10",


      "AllProduct":[
        {
          "ProductName":"Burger Tasty Food",
          "ProductImageURL":"https://img.freepik.com/premium-photo/hamburger-with-flying-ingredients-white-background_787273-480.jpg?w=2000",
          "OrderRating":"5",
          "OrderAmount":"/1kg / 120 Kcal",
          "OrderSelection":"1",
          "OrderPrice":"15",
        },


           {
          "ProductName":"Burger Tasty Food",
          "ProductImageURL":"https://img.freepik.com/premium-photo/hamburger-with-flying-ingredients-white-background_787273-480.jpg?w=2000",
          "OrderRating":"5",
          "OrderAmount":"/1kg / 120 Kcal",
          "OrderSelection":"1",
          "OrderPrice":"15",
        },


           {
          "ProductName":"Burger Tasty Food",
          "ProductImageURL":"https://img.freepik.com/premium-photo/hamburger-with-flying-ingredients-white-background_787273-480.jpg?w=2000",
          "OrderRating":"5",
          "OrderAmount":"/1kg / 120 Kcal",
          "OrderSelection":"1",
          "OrderPrice":"15",
        },

           {
          "ProductName":"Burger Tasty Food",
          "ProductImageURL":"https://img.freepik.com/premium-photo/hamburger-with-flying-ingredients-white-background_787273-480.jpg?w=2000",
          "OrderRating":"5",
          "OrderAmount":"/1kg / 120 Kcal",
          "OrderSelection":"1",
          "OrderPrice":"15",
        },



      ]

    }



  ];

  @override
  Widget build(BuildContext context) {
    return Scaffold(
        backgroundColor: Colors.white,
        appBar: AppBar(
          iconTheme: IconThemeData(color: Colors.purple),
          leading: IconButton(
              onPressed: () => Navigator.of(context).pop(),
              icon: Icon(Icons.chevron_left)),
          title: const Text(
            "My Orders",
            style: TextStyle(color: Colors.black, fontWeight: FontWeight.bold),
          ),
          backgroundColor: Colors.transparent,
          bottomOpacity: 0.0,
          elevation: 0.0,
        ),
        body: SingleChildScrollView(
          child: Padding(
            padding: const EdgeInsets.all(8.0),
            child: Column(
              children: [
                // Center(
                //   child: Text(
                //     "Order History ",
                //     style: TextStyle(
                //         color: Color.fromARGB(255, 48, 2, 56),
                //         fontWeight: FontWeight.bold,
                //         fontSize: 24),
                //   ),
                // ),

          
                // SizedBox(
                //   height: 20,
                // ),
        for(var item in UserAllOrderHistory )
                Card(
                  child: Padding(
                    padding: EdgeInsets.only(
                        top: 16.0, left: 6.0, right: 6.0, bottom: 6.0),
                    child: Theme(
                      data: Theme.of(context)
                          .copyWith(dividerColor: Colors.transparent),
                      child: ExpansionTile(
                        title: Text(
                          '${item["orderNumber"]}',
                          style: TextStyle(
                              color: Color.fromARGB(255, 48, 2, 56),
                              fontWeight: FontWeight.bold,
                              fontSize: 16),
                        ),
                        subtitle: Row(
                          children: [
                            Icon(
                              Icons.payment,
                              color: Colors.purple,
                            ),
                            SizedBox(
                              width: 5,
                            ),
                            Text("${item["orderType"]}"),
                            SizedBox(
                              width: 5,
                            ),
                            Text(
                              "${item["LastOrderHistoryTime"]}",
                              style: TextStyle(
                                  color: Colors.grey,
                                  fontWeight: FontWeight.bold,
                                  fontSize: 13),
                            ),
                          ],
                        ),
                        children: <Widget>[
                          Container(
                              child: DottedLine(
                            direction: Axis.horizontal,
                            alignment: WrapAlignment.center,
                            lineLength: double.infinity,
                            lineThickness: 1.0,
                            dashLength: 4.0,
                            dashColor: Colors.black,
                            dashGradient: [Colors.grey, Colors.purple],
                            dashRadius: 0.0,
                            dashGapLength: 4.0,
                            dashGapColor: Colors.transparent,
                            dashGapGradient: [Colors.grey, Colors.purple],
                            dashGapRadius: 0.0,
                          )),

                          SizedBox(
                            height: 30,
                          ),
            //  for (int j = 0; j < item["AllProduct"].; j++)
             for(var product in item["AllProduct"])
                          Row(
                            children: [
                              Center(
                                child: ClipRRect(
                                  borderRadius: BorderRadius.circular(20.0),
                                  child: SizedBox.fromSize(
                                    size: Size.fromRadius(58), // Image radius
                                    child: Image.network(
                                      '${product["ProductImageURL"]}',
                                      width: 50,
                                      height: 50,
                                    ),
                                  ),
                                ),
                              ),
                              SizedBox(
                                width: 10,
                              ),
                              Column(
                                mainAxisAlignment: MainAxisAlignment.start,
                                crossAxisAlignment: CrossAxisAlignment.start,
                                children: [
                                  Text(
                                    "${product["ProductName"]}",
                                    style: TextStyle(
                                        color: Colors.purple,
                                        fontWeight: FontWeight.bold,
                                        fontSize: 16),
                                  ),
                                  SizedBox(
                                    height: 5,
                                  ),
                                  Row(
                                    children: [
                                      Icon(
                                        Icons.star,
                                        color: Colors.purple,
                                      ),
                                      Text("${product["OrderRating"]}"),
                                      Text(
                                        "${product["OrderAmount"]}",
                                        style: TextStyle(
                                            color: Colors.grey,
                                            fontWeight: FontWeight.bold,
                                            fontSize: 13),
                                      ),
                                    ],
                                  ),
                                  SizedBox(
                                    height: 5,
                                  ),
                                  Row(
                                    children: [
                                      Text(
                                        "${product["OrderSelection"]}",
                                        style: TextStyle(
                                            color: Colors.grey,
                                            fontWeight: FontWeight.bold,
                                            fontSize: 20),
                                      ),
                                      Icon(
                                        Icons.close,
                                        color: Colors.grey,
                                      ),
                                      Text(
                                        "${product["OrderPrice"]}",
                                        style: TextStyle(
                                            color: Colors.purple,
                                            fontWeight: FontWeight.bold,
                                            fontSize: 20),
                                      ),
                                    ],
                                  ),
                                ],
                              )
                            ],
                          ),

                          SizedBox(
                            height: 10,
                          ),

                          // Row(
                          //   children: [
                          //     Center(
                          //       child: ClipRRect(
                          //         borderRadius: BorderRadius.circular(20.0),
                          //         child: SizedBox.fromSize(
                          //           size: Size.fromRadius(58), // Image radius
                          //           child: Image.network(
                          //             'https://img.freepik.com/premium-photo/hamburger-with-flying-ingredients-white-background_787273-480.jpg?w=2000',
                          //             width: 50,
                          //             height: 50,
                          //           ),
                          //         ),
                          //       ),
                          //     ),
                          //     SizedBox(
                          //       width: 10,
                          //     ),
                          //     Column(
                          //       mainAxisAlignment: MainAxisAlignment.start,
                          //       crossAxisAlignment: CrossAxisAlignment.start,
                          //       children: [
                          //         Text(
                          //           "Burger Tasty Food",
                          //           style: TextStyle(
                          //               color: Colors.purple,
                          //               fontWeight: FontWeight.bold,
                          //               fontSize: 16),
                          //         ),
                          //         SizedBox(
                          //           height: 5,
                          //         ),
                          //         Row(
                          //           children: [
                          //             Icon(
                          //               Icons.star,
                          //               color: Colors.purple,
                          //             ),
                          //             Text("5"),
                          //             Text(
                          //               "/1kg / 120 Kcal",
                          //               style: TextStyle(
                          //                   color: Colors.grey,
                          //                   fontWeight: FontWeight.bold,
                          //                   fontSize: 13),
                          //             ),
                          //           ],
                          //         ),
                          //         SizedBox(
                          //           height: 5,
                          //         ),
                          //         Row(
                          //           children: [
                          //             Text(
                          //               "1",
                          //               style: TextStyle(
                          //                   color: Colors.grey,
                          //                   fontWeight: FontWeight.bold,
                          //                   fontSize: 20),
                          //             ),
                          //             Icon(
                          //               Icons.close,
                          //               color: Colors.grey,
                          //             ),
                          //             Text(
                          //               "15",
                          //               style: TextStyle(
                          //                   color: Colors.purple,
                          //                   fontWeight: FontWeight.bold,
                          //                   fontSize: 20),
                          //             ),
                          //           ],
                          //         ),
                          //       ],
                          //     )
                          //   ],
                          // ),

                          // SizedBox(
                          //   height: 30,
                          // ),

                          Container(
                              child: DottedLine(
                            direction: Axis.horizontal,
                            alignment: WrapAlignment.center,
                            lineLength: double.infinity,
                            lineThickness: 1.0,
                            dashLength: 4.0,
                            dashColor: Colors.black,
                            dashGradient: [Colors.grey, Colors.purple],
                            dashRadius: 0.0,
                            dashGapLength: 4.0,
                            dashGapColor: Colors.transparent,
                            dashGapGradient: [Colors.grey, Colors.purple],
                            dashGapRadius: 0.0,
                          )),

                          SizedBox(
                            height: 30,
                          ),

                          Row(
                            children: [
                              Text(
                                "Subtotal",
                                style: TextStyle(
                                    color: Colors.grey,
                                    fontWeight: FontWeight.bold,
                                    fontSize: 20),
                              ),
                              SizedBox(
                                width: 10,
                              ),
                              Text(
                                "--------------------------",
                                style: TextStyle(
                                    color: Colors.purple,
                                    fontWeight: FontWeight.bold,
                                    fontSize: 16),
                              ),
                              SizedBox(
                                width: 10,
                              ),
                              Text(
                                "10",
                                style: TextStyle(
                                    color: Colors.purple,
                                    fontWeight: FontWeight.bold,
                                    fontSize: 20),
                              ),
                            ],
                          ),

                          SizedBox(
                            height: 20,
                          ),

                          // Calculation Section
                          Row(
                            children: [
                              Text(
                                "Delivery",
                                style: TextStyle(
                                    color: Colors.grey,
                                    fontWeight: FontWeight.bold,
                                    fontSize: 20),
                              ),
                              SizedBox(
                                width: 10,
                              ),
                              Text(
                                "--------------------------",
                                style: TextStyle(
                                    color: Colors.purple,
                                    fontWeight: FontWeight.bold,
                                    fontSize: 16),
                              ),
                              SizedBox(
                                width: 10,
                              ),
                              Text(
                                "10",
                                style: TextStyle(
                                    color: Colors.purple,
                                    fontWeight: FontWeight.bold,
                                    fontSize: 20),
                              ),
                            ],
                          ),

                          SizedBox(
                            height: 20,
                          ),

                          Row(
                            children: [
                              Text(
                                "Total",
                                style: TextStyle(
                                    color: Colors.purple,
                                    fontWeight: FontWeight.bold,
                                    fontSize: 24),
                              ),
                              SizedBox(
                                width: 30,
                              ),
                              Text(
                                "--------------------------",
                                style: TextStyle(
                                    color: Colors.purple,
                                    fontWeight: FontWeight.bold,
                                    fontSize: 16),
                              ),
                              SizedBox(
                                width: 10,
                              ),
                              Text(
                                "10",
                                style: TextStyle(
                                    color: Colors.purple,
                                    fontWeight: FontWeight.bold,
                                    fontSize: 20),
                              ),
                            ],
                          ),

                          SizedBox(
                            height: 20,
                          ),

                          Row(
                            children: [
                              Column(
                                mainAxisAlignment: MainAxisAlignment.start,
                                crossAxisAlignment: CrossAxisAlignment.start,
                                children: [
                                  Row(
                                    children: [
                                      Icon(
                                        Icons.person,
                                        color: Colors.purple,
                                      ),
                                      SizedBox(
                                        width: 5,
                                      ),
                                      Text(
                                        "Information",
                                        style: TextStyle(
                                            color: Colors.purple,
                                            fontWeight: FontWeight.bold,
                                            fontSize: 20),
                                      ),
                                    ],
                                  ),

                                  Text(
                                    "Name: Mahadi Hasan +012123214",
                                    style: TextStyle(
                                        color: Colors.grey,
                                        fontWeight: FontWeight.bold,
                                        fontSize: 16),
                                  ),

                                  Text(
                                    "Email: mahadi@gmail.com",
                                    style: TextStyle(
                                        color: Colors.grey,
                                        fontWeight: FontWeight.bold,
                                        fontSize: 16),
                                  ),

                                  // Address Section
                                  SizedBox(
                                    height: 20,
                                  ),

                                  Row(
                                    children: [
                                      Icon(
                                        Icons.location_on,
                                        color: Colors.purple,
                                      ),
                                      SizedBox(
                                        width: 5,
                                      ),
                                      Text(
                                        "Address",
                                        style: TextStyle(
                                            color: Colors.purple,
                                            fontWeight: FontWeight.bold,
                                            fontSize: 20),
                                      ),
                                    ],
                                  ),

                                  Text(
                                    "Joypurhat Rajshahi Bangladesh",
                                    style: TextStyle(
                                        color: Colors.grey,
                                        fontWeight: FontWeight.bold,
                                        fontSize: 16),
                                  ),

                                  Text(
                                    "Joypurhat Rajshahi Bangladesh",
                                    style: TextStyle(
                                        color: Colors.grey,
                                        fontWeight: FontWeight.bold,
                                        fontSize: 16),
                                  ),
                                ],
                              ),
                            ],
                          )
                        ],
                      ),
                    ),
                  ),
                )
              ],
            ),
          ),
        ));
  }
}
